<div class="row">
  <form [formGroup]="formGroup">
    @if (showStep() === formSteps.EnterEmail) {
      <div class="row mb-4">
        <mat-form-field>
          <mat-label>{{ 'Login/Email' | gmessage }}</mat-label>
          <input
            #emailInput
            type="text"
            matInput
            [placeholder]="'Login/EmailPlaceholder' | gmessage"
            [formControlName]="formControlNames.email" />
          <mat-hint>{{ 'Login/EmailHint' | gmessage }}</mat-hint>
          @if (control(formControlNames.email).errors) {
            <mat-error>{{ 'Login/EmailHint' | gmessage }}</mat-error>
          }
        </mat-form-field>
      </div>
      <div class="row mb-2">
        <div class="col-12 offset-sm-6 col-sm-6">
          <button mat-raised-button class="w-100" type="submit" (click)="goToStepEnterPhone()">
            {{ 'Shared/BtnNext' | gmessage }}
          </button>
        </div>
      </div>
    }
    @if (showStep() === formSteps.EnterPhone) {
      <div class="row mb-4">
        <mat-form-field>
          <mat-label>{{ 'Login/Phone' | gmessage }}</mat-label>
          <input
            #phoneInput
            type="text"
            matInput
            [placeholder]="'Login/PhonePlaceholder' | gmessage"
            [formControlName]="formControlNames.phone" />
          <mat-hint>{{ 'Login/PhoneHint' | gmessage }}</mat-hint>
          @if (control(formControlNames.phone).errors) {
            <mat-error>{{ 'Login/PhoneHint' | gmessage }}</mat-error>
          }
        </mat-form-field>
      </div>
      <div class="row mb-2">
        <div class="col-6">
          <button mat-raised-button class="w-100" type="button" (click)="goToStepEnterEmail()">
            {{ 'Shared/BtnBack' | gmessage }}
          </button>
        </div>
        <div class="col-6">
          <button mat-raised-button class="w-100" type="submit" (click)="goToStepEnterPassword()">
            {{ 'Shared/BtnNext' | gmessage }}
          </button>
        </div>
      </div>
    }
    @if (showStep() === formSteps.ResetPassword) {
      <div class="row">
        <div class="col-12 mb-3">
          {{ 'Login/PasswordNotSetError' | gmessage }}
        </div>
        <div class="col-12 mb-3">
          <button mat-stroked-button class="w-100" type="button" (click)="sendEmailResetPassword()">
            {{ 'Login/BtnSetPassword' | gmessage }}
          </button>
        </div>
        <div class="col-12">
          <mat-hint>{{ 'Login/BtnSetPasswordHint' | gmessage }}</mat-hint>
        </div>
      </div>
    }
    @if (showStep() === formSteps.EnterPassword) {
      <div class="row mb-2">
        <mat-form-field>
          <mat-label>{{ 'Login/Password' | gmessage }}</mat-label>
          <input
            #passwordInput
            matInput
            [type]="hidePassword() ? 'password' : 'text'"
            [placeholder]="'Login/PasswordPlaceholder' | gmessage"
            [formControlName]="formControlNames.password" />
          <button
            mat-icon-button
            matSuffix
            tabindex="-1"
            (click)="togglePasswordVisibility($event)"
            [attr.aria-label]="'Login/HidePasswordAriaLabel' | gmessage"
            [attr.aria-pressed]="hidePassword()">
            <mat-icon>{{ hidePassword() ? 'visibility' : 'visibility_off' }}</mat-icon>
          </button>
        </mat-form-field>
      </div>
      @if (showResetPasswordButton()) {
        <div class="row mb-2">
          <div class="offset-3 col-9 offset-sm-6 col-sm-6">
            <button mat-button class="w-100" type="button" (click)="goToStepForgotPassword()">
              {{ 'Login/ForgotPassword' | gmessage }}
            </button>
          </div>
        </div>
      }
      <div class="row mb-2">
        <div class="col-6">
          <button mat-raised-button class="w-100" type="button" (click)="goToStepEnterEmail()">
            {{ 'Shared/BtnBack' | gmessage }}
          </button>
        </div>
        <div class="col-6">
          <button mat-raised-button class="w-100" type="submit" (click)="login()">
            {{ 'Login/BtnLogin' | gmessage }}
          </button>
        </div>
      </div>
    }
    @if (showStep() === formSteps.ForgotPassword) {
      <div class="row">
        <div class="col-12 mb-3">
          {{ 'Login/ResetPasswordMessage' | gmessage }}
        </div>
        <div class="col-12 mb-3">
          <button mat-stroked-button class="w-100" type="button" (click)="sendEmailResetPassword()">
            {{ 'Login/BtnResetPassword' | gmessage }}
          </button>
        </div>
        <div class="col-12">
          <mat-hint>{{ 'Login/BtnResetPasswordHint' | gmessage }}</mat-hint>
        </div>
      </div>
    }
    @if (showStep() === formSteps.UserNotActive) {
      <div>
        <div class="row mb-3">
          <div class="col-12 error-container fw-bold p-2">
            {{ 'Login/AccountNotActiveErrorTitle' | gmessage }}
          </div>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-12" [innerHtml]="'Login/ErrorAccountNotActive' | gmessage"></div>
      </div>
      <div class="row mb-2">
        <div class="col-6">
          <button mat-raised-button class="w-100" type="button" (click)="goToStepEnterEmail()">
            {{ 'Shared/BtnBack' | gmessage }}
          </button>
        </div>
      </div>
    }

    @if (loginError()) {
      <p class="mat-mdc-form-field-error">
        {{ loginError() }}
      </p>
    }
  </form>
</div>
